<!doctype html>
<html>

<head>

  <title>
    
      Color Gates | Solar Grammars
    
  </title>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta charset="utf-8">

  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="stylesheet" href="/assets/css/syntax.css">
  <!-- Use Atom -->
  <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Solar Grammars" />
  <!-- RSS-v2.0
  <link href="/rss-feed.xml" type="application/rss+xml" rel="alternate" title="Solar Grammars | "/>
  //-->


  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto|Source+Code+Pro">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
  </script>

  <!-- Google Analytics -->
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', '', 'auto');
  ga('send', 'pageview');
</script>


  <!-- Use Jekyll SEO plugin -->
  <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Color Gates | Solar Grammars</title>
<meta name="generator" content="Jekyll v3.6.3" />
<meta property="og:title" content="Color Gates" />
<meta name="author" content="Solar Grammars" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="We have explored the relationship of language and colors from both word character level perspectives, but in isolation. Then, the natural question that arises is what if subword structures play an important role in color grounding?" />
<meta property="og:description" content="We have explored the relationship of language and colors from both word character level perspectives, but in isolation. Then, the natural question that arises is what if subword structures play an important role in color grounding?" />
<link rel="canonical" href="http://localhost:4000/blog/color-gates.html" />
<meta property="og:url" content="http://localhost:4000/blog/color-gates.html" />
<meta property="og:site_name" content="Solar Grammars" />
<meta property="og:image" content="http://localhost:4000/arctic-1.jpg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-12-17T00:26:39+09:00" />
<script type="application/ld+json">
{"description":"We have explored the relationship of language and colors from both word character level perspectives, but in isolation. Then, the natural question that arises is what if subword structures play an important role in color grounding?","@type":"BlogPosting","image":"http://localhost:4000/arctic-1.jpg","url":"http://localhost:4000/blog/color-gates.html","headline":"Color Gates","dateModified":"2019-12-17T00:26:39+09:00","datePublished":"2019-12-17T00:26:39+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/blog/color-gates.html"},"author":{"@type":"Person","name":"Solar Grammars"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


</head>


<body>

<div class="container">
  <header class="site-header">
  <h3 class="site-title">
    <!--
    <img  src="../assets/img/SG.jpg" style="width:50px;max-width:50px;float:left;margin:5px 10px 0 0;">
    -->
    <a href="/">Solar Grammars</a>
  </h3>
  <nav class="menu-list">
    
      <a href="/pages/contact.html" class="menu-link">Contact</a>
    

    
      <a href="https://twitter.com/solargrammars" class="menu-link" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a>
    
      <a href="mailto:solargrammars@gmail.com" class="menu-link" target="_blank"><i class="fa fa-envelope" aria-hidden="true"></i></a>
    
      <a href="feed.xml" class="menu-link" target="_blank"><i class="fa fa-rss-square" aria-hidden="true"></i></a>
    
  </nav>
  <div class="dropdown">
    <button class="dropbtn"><i class="fa fa-bars" aria-hidden="true"></i></button>
    <div class="dropdown-content">
      
        <a href="/pages/contact.html" class="menu-link">Contact</a>
      

      
        <a href="https://twitter.com/solargrammars" class="menu-link" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a>
      
        <a href="mailto:solargrammars@gmail.com" class="menu-link" target="_blank"><i class="fa fa-envelope" aria-hidden="true"></i></a>
      
        <a href="feed.xml" class="menu-link" target="_blank"><i class="fa fa-rss-square" aria-hidden="true"></i></a>
      
    </div>
  </div>
</header>

  <div class="posts-wrapper">
    <div class="page-content">
  <h1>
    Color Gates
  </h1>

  <span class="post-date">
    Written on
    
    December
    17th,
    2019
    by
    
      Solar Grammars
    
  </span>

  <!--
  
    <div class="featured-image">
      <img src="/assets/img/arctic-1.jpg">
    </div>
  
  -->
  <article>
    <p>We have explored the relationship of language and colors
from both word character level perspectives, but in 
isolation. Then, the natural question that arises is what 
if subword structures play an important role in color 
grounding?</p>

<p>When we reviewed the results of the experiments on character 
level description generation, we found quite interesting 
examples where, as we progressed on the sequences of 
characters, the generated colors suddenly changed. That was 
the case of descriptions such as <code class="highlighter-rouge">Strawberry Lipstick</code> (or 
something like that), where the generation up the character
 <code class="highlighter-rouge">w</code> was giving us a brown-ish color, naturally associated 
with the word <code class="highlighter-rouge">straw</code>, which was also present during training. 
Then, suddenly, as the model incorporated the remaining tokens 
sequentially, <code class="highlighter-rouge">b -&gt; e -&gt; r -&gt; r...</code> the output color was 
gradually changing to red.</p>

<p>This naturally led us to think, how does the grounding of a 
word or sentence can be understood in terms of the interplay
between its words and tokens? For a given description, is it 
a specific character pattern that impact the most on the 
changes on color  generation? What are the common subword 
structures that command or condition more strongly the color 
generation?</p>

<p>In order to answer those questions, we need a way to quantify 
the contribution of character and word level representations 
â€¦ <code class="highlighter-rouge">together</code>. Lets say we train a model which learns a 
character based feature vector that is also combined with a 
word vector. Both vectors are combined and then used to generate 
an associated vector. Which one contributes more to minimize 
the loss, lets say, expressed as the MSE between the generated 
color and the ground truth.</p>

<p>Fortunately, there has been quite interesting research
on the interplay between character and  word level 
representations. One way to represent such relationship is 
through the concept of <code class="highlighter-rouge">gates</code>, such as in <a href="https://arxiv.org/pdf/1904.05584.pdf">Balazs et al</a> 
or <a href="https://arxiv.org/abs/1606.01700">Miyamoto et al</a>, which in simple terms means 
to learn a parameter $g$ that we can use to weight the the 
vector representations coming from both char  and word level:</p>

<script type="math/tex; mode=display">w = w_{char} * g +  w_{word} * (1-g)</script>

<p>Here <script type="math/tex">g</script> can be a scalar or a vector. Both cases work almost 
the same, in which the idea is to have a fully connected layer 
that takes as input the word level representation and  outputs 
a scalar or a vector.</p>

<p>Lets conduct a couple of experiments to see if this way of 
modeling color descriptions, allow us to obtain interesting 
insights. As always, lets start with the data. For the 
purpose of this study, we can reuse the data
data extracted from ColourLovers, which we have used previously.</p>

<p>One element we can consider is to condition the descriptions by 
certain characteristics such as length or even color. For the 
moment I think grouping them by 
the POS tag could give us a good indicator. This is a sample of the 
descriptions, without considering  any grouping.</p>

<p>TABLE</p>

<p>Now, for each description, let obtain their POS tags and study their
composition. In terms of patterns of POS tags within the
descriptions, we can see something like this:</p>

<p><img src="/assets/img/blog/color-gates-img/pos_freqs.png" alt="" /></p>

<p>Lets obtain a sample from the top 5 groups of patterns with most 
descriptions. This is what we get:</p>

<p><code class="highlighter-rouge">('ADJ', 'NOUN')</code>:</p>
<table>
<tr> <td>dutch teal</td><td><div style="float:left;width:100px; height:20px;background:#1a6470;">  </div>  </td>  </tr>
<tr> <td>hot pink</td><td><div style="float:left;width:100px; height:20px;background:#ff67b4;">  </div>  </td>  </tr>
<tr> <td>mighty slate</td><td><div style="float:left;width:100px; height:20px;background:#556270;">  </div>  </td>  </tr>
<tr> <td>certain frogs</td><td><div style="float:left;width:100px; height:20px;background:#c3ff68;">  </div>  </td>  </tr>
<tr> <td>millennial blue</td><td><div style="float:left;width:100px; height:20px;background:#374bde;">  </div>  </td>  </tr>
<tr> <td>black tulip</td><td><div style="float:left;width:100px; height:20px;background:#340943;">  </div>  </td>  </tr>
<tr> <td>lipgloss boost</td><td><div style="float:left;width:100px; height:20px;background:#d7217e;">  </div>  </td>  </tr>
<tr> <td>green tea</td><td><div style="float:left;width:100px; height:20px;background:#edc003;">  </div>  </td>  </tr>
<tr> <td>cheery pink</td><td><div style="float:left;width:100px; height:20px;background:#fa3a7f;">  </div>  </td>  </tr>
<tr> <td>juicy pink</td><td><div style="float:left;width:100px; height:20px;background:#dd037e;">  </div>  </td>  </tr>
</table>

<p><code class="highlighter-rouge">('NOUN', 'NOUN')</code>:</p>
<table>
<tr> <td>vanilla cream</td><td><div style="float:left;width:100px; height:20px;background:#fbe6da;">  </div>  </td>  </tr>
<tr> <td>vitamin c</td><td><div style="float:left;width:100px; height:20px;background:#d26f36;">  </div>  </td>  </tr>
<tr> <td>orange icing</td><td><div style="float:left;width:100px; height:20px;background:#ea3556;">  </div>  </td>  </tr>
<tr> <td>barbie world</td><td><div style="float:left;width:100px; height:20px;background:#e20092;">  </div>  </td>  </tr>
<tr> <td>sugar champagne</td><td><div style="float:left;width:100px; height:20px;background:#f9cdad;">  </div>  </td>  </tr>
<tr> <td>metro blue</td><td><div style="float:left;width:100px; height:20px;background:#2c89e6;">  </div>  </td>  </tr>
<tr> <td>brides blush</td><td><div style="float:left;width:100px; height:20px;background:#ea69ae;">  </div>  </td>  </tr>
<tr> <td>moon warrior</td><td><div style="float:left;width:100px; height:20px;background:#51445f;">  </div>  </td>  </tr>
<tr> <td>love affair</td><td><div style="float:left;width:100px; height:20px;background:#856cc9;">  </div>  </td>  </tr>
<tr> <td>heirloom hydrangea</td><td><div style="float:left;width:100px; height:20px;background:#b954f2;">  </div>  </td>  </tr>

</table>

<p><code class="highlighter-rouge">('VERB', 'NOUN')</code>:</p>
<table>
<tr> <td>haunted milk</td><td><div style="float:left;width:100px; height:20px;background:#cdd7b6;">  </div>  </td>  </tr>
<tr> <td>raspberry lemonade</td><td><div style="float:left;width:100px; height:20px;background:#d2c2f1;">  </div>  </td>  </tr>
<tr> <td>minted peas</td><td><div style="float:left;width:100px; height:20px;background:#c8f0b2;">  </div>  </td>  </tr>
<tr> <td>strawberry lipgloss</td><td><div style="float:left;width:100px; height:20px;background:#ce5d9b;">  </div>  </td>  </tr>
<tr> <td>irish sea</td><td><div style="float:left;width:100px; height:20px;background:#13a445;">  </div>  </td>  </tr>
<tr> <td>poached ivory</td><td><div style="float:left;width:100px; height:20px;background:#d8d8c0;">  </div>  </td>  </tr>
<tr> <td>wedded passion</td><td><div style="float:left;width:100px; height:20px;background:#630947;">  </div>  </td>  </tr>
<tr> <td>imagine roses</td><td><div style="float:left;width:100px; height:20px;background:#fe016b;">  </div>  </td>  </tr>
<tr> <td>rosen maiden</td><td><div style="float:left;width:100px; height:20px;background:#ffa4a0;">  </div>  </td>  </tr>
<tr> <td>powdered sugar</td><td><div style="float:left;width:100px; height:20px;background:#bddebe;">  </div>  </td>  </tr>
</table>

<p><code class="highlighter-rouge">('ADJ', 'NOUN', 'NOUN')</code>:</p>
<table>
<tr> <td>hawaiian lava fields</td><td><div style="float:left;width:100px; height:20px;background:#4f4e57;">  </div>  </td>  </tr>
<tr> <td>new yolk city</td><td><div style="float:left;width:100px; height:20px;background:#ffa111;">  </div>  </td>  </tr>
<tr> <td>white chocolate fill</td><td><div style="float:left;width:100px; height:20px;background:#f8ecc9;">  </div>  </td>  </tr>
<tr> <td>unreal food pills</td><td><div style="float:left;width:100px; height:20px;background:#fa6900;">  </div>  </td>  </tr>
<tr> <td>red velvet cake</td><td><div style="float:left;width:100px; height:20px;background:#6e2e37;">  </div>  </td>  </tr>
<tr> <td>royal passion rc</td><td><div style="float:left;width:100px; height:20px;background:#4b1139;">  </div>  </td>  </tr>
<tr> <td>pure sun tanning</td><td><div style="float:left;width:100px; height:20px;background:#eb053f;">  </div>  </td>  </tr>
<tr> <td>soft lace pink</td><td><div style="float:left;width:100px; height:20px;background:#ffebeb;">  </div>  </td>  </tr>
<tr> <td>sexy police officer</td><td><div style="float:left;width:100px; height:20px;background:#f7374b;">  </div>  </td>  </tr>
<tr> <td>cold morning dew</td><td><div style="float:left;width:100px; height:20px;background:#c8ebfe;">  </div>  </td>  </tr>

</table>

<p><code class="highlighter-rouge">('ADJ','ADJ','NOUN')</code>:</p>
<table>
<tr> <td>parttime super girl</td><td><div style="float:left;width:100px; height:20px;background:#e45635;">  </div>  </td>  </tr>
<tr> <td>expensive black wool</td><td><div style="float:left;width:100px; height:20px;background:#0f0a06;">  </div>  </td>  </tr>
<tr> <td>white kitten nose</td><td><div style="float:left;width:100px; height:20px;background:#ffd0d4;">  </div>  </td>  </tr>
<tr> <td>typical light grey</td><td><div style="float:left;width:100px; height:20px;background:#e7e7e7;">  </div>  </td>  </tr>
<tr> <td>old fine paper</td><td><div style="float:left;width:100px; height:20px;background:#f0eee1;">  </div>  </td>  </tr>
<tr> <td>rich red wedding</td><td><div style="float:left;width:100px; height:20px;background:#88090b;">  </div>  </td>  </tr>
<tr> <td>hawaiian blue light</td><td><div style="float:left;width:100px; height:20px;background:#66aef3;">  </div>  </td>  </tr>
<tr> <td>little blue eyes</td><td><div style="float:left;width:100px; height:20px;background:#486060;">  </div>  </td>  </tr>
<tr> <td>vintage new york</td><td><div style="float:left;width:100px; height:20px;background:#90797e;">  </div>  </td>  </tr>
<tr> <td>blue eyed girl</td><td><div style="float:left;width:100px; height:20px;background:#2b70bb;">  </div>  </td>  </tr>

</table>

<p>In general we can see a good correlation between what each description 
expresses and the colors it has associated. 
Interestingly, in the case of <code class="highlighter-rouge">(VERB, NOUN)</code>, it seems the parser
got a bit confused and most of the instances can be regarded as
part of the  <code class="highlighter-rouge">(ADJECTIVE, NOUN)</code>.</p>

<p>There are several instances where the adjective is quite vague, 
such as in the case of <code class="highlighter-rouge">haunted</code> in <code class="highlighter-rouge">haunted milk</code>. In those cases,
we can expect any model to have a hard time trying to figure
out how learn the specific variation of the color. In that example,
the noun associated is <code class="highlighter-rouge">milk</code>, which we know has the color <code class="highlighter-rouge">white</code>
as the most probable reference. But then, how to turn a plain 
version of <code class="highlighter-rouge">white</code> in to <code class="highlighter-rouge">haunted milk</code>. Here is where it relies
my main hypothesis on the usefulness of the gating mechanism.
I am expecting a model that is only character based word based 
to fail as I consider necessary for the model to play 
a bit with a more flexible representation of the description.</p>

<p>For the <code class="highlighter-rouge">milk</code> part of the description, I think , yes, just the 
word level vector might be enough. But for making sense of what is
<code class="highlighter-rouge">haunted</code>, I think the model should take into account substructures such 
as <code class="highlighter-rouge">haunt</code>, which can be only incorporated via the character level 
representation. Then, I say that
as <code class="highlighter-rouge">haunt</code> can be more associated to pale or ghostly concepts (e.g. 
<em>The haunted house</em> or this interesting <a href="https://www.thesaurus.com/browse/haunted">list</a>, then
the model could learn to associate the colors in other
ghost-centric descriptions present in the data (thats important 
to highlight, I assume that haunted in the sense ghost related stuff, 
but it could be the case the given the data, we are referring to 
another type of connotation).</p>

<p>In summary, I think a gating mechanism could allow the model
to <code class="highlighter-rouge">learn to choose</code> from which source (character level or word level)
when it needs to generate a color from a description. Moreover, 
the gates can only help the model to choose one or another, but
as proportion, gracefully combining both representations.</p>

<p>With this, lets conduct the following  experiment:</p>

<ul>
  <li>Lets consider 4 models:
    <ul>
      <li>Just word embedding</li>
      <li>combine char LSTM + Glove by simple contatenation</li>
      <li>combine char LSTM + Glove by gating</li>
    </ul>
  </li>
</ul>

<p><img src="/assets/img/blog/color-gates-img/losses.png" alt="" /></p>

  </article>

  <div class="post-share">
    <div class="post-date">Feel free to share!</div>
    <div class="sharing-icons">
      <a href="https://twitter.com/intent/tweet?text=Color Gates&amp;url=/blog/color-gates.html" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a>
      <a href="https://www.facebook.com/sharer/sharer.php?u=/blog/color-gates.html&amp;title=Color Gates" target="_blank"><i class="fa fa-facebook" aria-hidden="true"></i></a>
      <a href="https://plus.google.com/share?url=/blog/color-gates.html" target="_blank"><i class="fa fa-google-plus" aria-hidden="true"></i></a>
    </div>
  </div>
  <!--
  <div class="related">
    <h2>You may also enjoy...</h2>
    
    <ul class="related-posts">
      
        
          
          
        
          
            <li>
              <h3>
                <a href="/blog/colors-in-context.html">
                  <div class="related-thumbnail">
                    
                      <img src="http://localhost:4000/assets/img/arctic-1.jpg">
                    
                  </div>
                  <div class="related-title">
                    Colors in Context
                  </div>
                  
                </a>
              </h3>
            </li>
            
          
        
      
    </ul>
  </div>
  -->
  

</div>

  </div>
  <footer class="footer">
  <!--
  
    <a href="https://twitter.com/solargrammars" class="menu-link" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a>
  
    <a href="mailto:solargrammars@gmail.com" class="menu-link" target="_blank"><i class="fa fa-envelope" aria-hidden="true"></i></a>
  
    <a href="feed.xml" class="menu-link" target="_blank"><i class="fa fa-rss-square" aria-hidden="true"></i></a>
  
  -->
<!--
  <div class="post-date"><a href="/">Solar Grammars</a></div>
-->
</footer>

</div>

</body>
</html>
